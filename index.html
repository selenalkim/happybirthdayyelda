<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>İYİ Kİ DOĞDUN TEYZECİĞİM</title>

  <!-- Japandi-friendly font -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#f6f3ee;   /* bone */
      --bg2:#eae3d9;   /* warm sand */
      --ink:#2f2a26;   /* soft charcoal */
      --muted:#6d665f; /* taupe */
      --accent:#c97c5d;/* terracotta */
      --accent-2:#b8c4b1; /* sage */
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Manrope', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
      color:var(--ink);
      background:linear-gradient(160deg,var(--bg1) 0%, var(--bg2) 100%);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      text-align:center; padding:24px;
    }

    h1{
      color:var(--ink);
      letter-spacing:.06em;
      text-transform:uppercase;
      margin:.25rem 0;
      font-weight:700;
      font-size:clamp(1.6rem,4.8vw,3rem);
    }
    h2{
      color:var(--muted);
      margin:.25rem 0 1.25rem;
      font-weight:500;
      font-size:clamp(1rem,2.6vw,1.25rem);
    }

    .stage{
      position:relative;
      width:min(88vw,1100px);
      height:min(68vh,70vw);
      border-radius:20px;
      overflow:hidden;
      background:#eee;
      box-shadow:0 12px 30px rgba(0,0,0,.08);
      margin:12px 0 16px;
      border:1px solid rgba(47,42,38,.08);
    }
    .stage img{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
      opacity:0; transition:opacity 800ms ease-in-out; will-change:opacity;
    }
    .stage img.active{ opacity:1; }

    button{
      background:var(--accent);
      color:#fff; border:0; border-radius:999px;
      padding:12px 26px; font-weight:700; letter-spacing:.04em;
      cursor:pointer; transition:transform .18s ease, box-shadow .18s ease, background .18s ease;
    }
    button:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.18); background:#b96e52; }
    button:active{ transform:translateY(0); box-shadow:none; }

    footer{
      margin-top:18px;
      opacity:.9;
      font-size:.95rem;
      color:var(--muted);
    }

    /* Intro overlay */
    .intro{
      position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
      background:radial-gradient(1200px 800px at 50% 40%, rgba(200,180,160,.25), transparent),
                 linear-gradient(160deg, var(--bg1) 0%, var(--bg2) 100%);
      z-index:9999;
      transition:opacity .7s ease, visibility .7s ease;
    }
    .intro.hidden{ opacity:0; visibility:hidden; }
    .intro h3{
      margin:0 0 6px 0;
      color:var(--ink);
      font-weight:700;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:clamp(1.3rem,5.6vw,2.4rem);
    }
    .intro .date{
      color:var(--muted);
      font-size:clamp(.95rem,2.5vw,1.05rem);
      margin-bottom:10px;
    }
    .intro .hint{
      margin-top:6px;
      color:var(--muted);
      font-size:.95rem;
    }

    /* Fireworks canvas */
    #fw{ position:absolute; inset:0; width:100%; height:100%; }

    :focus-visible{ outline:2px solid var(--accent-2); outline-offset:2px; border-radius:8px; }
  </style>
</head>
<body>

  <!-- Intro Overlay with Fireworks -->
  <div class="intro" id="intro" role="dialog" aria-label="Açılış">
    <canvas id="fw"></canvas>
    <h3>DOĞUM GÜNÜN KUTLU OLSUN</h3>
    <div class="date">29.10.2025</div>
    <div class="hint">devam etmek için dokun / tıkla</div>
  </div>

  <h1>İYİ Kİ DOĞDUN TEYZECİĞİM</h1>
  <h2>iyi ki varsın, bu sene sana şans getirsin</h2>

  <div class="stage" aria-label="Fotoğraf slayt gösterisi">
    <img id="imgA" alt="Yelda'nın fotoğrafı">
    <img id="imgB" alt="Yelda'nın fotoğrafı">
  </div>

  <button id="nextBtn" type="button">SONRAKI RESİM</button>

  <footer>en sevdiğin yeğenin Selen</footer>

  <audio id="bgMusic" autoplay loop>
    <source src="music/happy-birthday.mp3" type="audio/mpeg">
    Tarayıcınız ses etiketini desteklemiyor.
  </audio>

  <script>
    // ====== CONFIG ======
    const SLIDE_MS = 5000;
    const images = [
      "images/yelda-1.jpg",
      "images/yelda-2.jpg",
      "images/yelda-3.jpg",
      "images/yelda-4.jpg",
      "images/yelda-5.jpg"
    ];
    // =====================

    // Audio autoplay handling (mobile)
    const music = document.getElementById('bgMusic');

    // ===== Fireworks on canvas (intro) =====
    const intro = document.getElementById('intro');
    const canvas = document.getElementById('fw');
    const ctx = canvas.getContext('2d');
    let W, H, fireworks = [], lastTime = 0;

    function resize(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function rand(min, max){ return Math.random()*(max-min)+min; }
    function Firework(x, y, hue){
      this.x = x; this.y = y;
      this.particles = [];
      const count = 50 + Math.floor(Math.random()*40);
      for(let i=0;i<count;i++){
        const angle = Math.random()*Math.PI*2;
        const speed = rand(1.5, 4.2);
        this.particles.push({
          x, y,
          vx: Math.cos(angle)*speed,
          vy: Math.sin(angle)*speed,
          life: rand(0.9,1.4),
          alpha: 1,
          size: rand(1,2.4),
          hue: hue + rand(-12,12)
        });
      }
    }
    Firework.prototype.update = function(dt){
      const g = 0.85; // gravity
      for(const p of this.particles){
        p.vx *= 0.99; p.vy *= 0.99;
        p.vy += g*dt;
        p.x += p.vx*60*dt;
        p.y += p.vy*60*dt;
        p.alpha -= dt*0.6;
      }
      this.particles = this.particles.filter(p=>p.alpha>0);
      return this.particles.length>0;
    }
    Firework.prototype.draw = function(){
      for(const p of this.particles){
        ctx.globalAlpha = Math.max(p.alpha,0);
        const grad = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 6);
        grad.addColorStop(0, 'rgba(255,255,255,1)');
        // earthy-ish fireworks: terracotta & sage glows
        grad.addColorStop(1, 'hsla(' + p.hue + ', 45%, 60%, 0)');
        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
    }

    function launch(){
      const x = rand(W*0.2, W*0.8);
      const y = rand(H*0.25, H*0.55);
      const hue = Math.random() < 0.5 ? 18 : 110; // terracotta-ish or sage-ish
      fireworks.push(new Firework(x, y, hue));
    }

    // kick off some bursts
    for(let i=0;i<5;i++){ setTimeout(launch, 200*i); }

    function loop(ts){
      if(!lastTime) lastTime = ts;
      const dt = Math.min((ts-lastTime)/1000, 0.033);
      lastTime = ts;
      ctx.clearRect(0,0,W,H);
      if(Math.random()<0.04){ launch(); }
      fireworks = fireworks.filter(fw=>fw.update(dt));
      for(const fw of fireworks){ fw.draw(); }
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);

    function closeIntro(){
      intro.classList.add('hidden');
      // try to start music after first interaction if blocked
      if(music && music.paused){ music.play().catch(()=>{}); }
    }
    // Auto-close after 3 seconds, also close on click/enter/space
    setTimeout(closeIntro, 3000);
    intro.addEventListener('click', closeIntro);
    intro.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') closeIntro(); });

    // ===== Slideshow =====
    const imgA = document.getElementById('imgA');
    const imgB = document.getElementById('imgB');
    const nextBtn = document.getElementById('nextBtn');

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function preload(src){
      const img = new Image();
      img.src = src;
      return img;
    }

    let queue = shuffle(images.slice());
    let currentSrc = null;
    let isAActive = true;
    let timer = null;

    function getNextSrc(){
      if(queue.length === 0) queue = shuffle(images.slice());
      return queue.shift();
    }

    function showNext(){
      const nextSrc = getNextSrc();
      if(images.length > 1 && nextSrc === currentSrc) return showNext();

      preload(nextSrc).onload = () => {
        const active = isAActive ? imgA : imgB;
        const idle   = isAActive ? imgB : imgA;
        idle.src = nextSrc;
        idle.classList.add('active');
        active.classList.remove('active');
        isAActive = !isAActive;
        currentSrc = nextSrc;
      };
    }

    function startAuto(){ stopAuto(); timer = setInterval(showNext, SLIDE_MS); }
    function stopAuto(){ if(timer){ clearInterval(timer); timer = null; } }

    (function init(){
      const first = getNextSrc();
      currentSrc = first;
      imgA.src = first;
      imgA.classList.add('active');
      const second = getNextSrc();
      preload(second).onload = () => { imgB.src = second; };
      startAuto();
    })();

    nextBtn.addEventListener('click', () => { showNext(); startAuto(); });

    const stage = document.querySelector('.stage');
    stage.addEventListener('mouseenter', stopAuto);
    stage.addEventListener('mouseleave', startAuto);
  </script>
</body>
</html>
